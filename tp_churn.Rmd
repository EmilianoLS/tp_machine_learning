---
title: "TP_CHURN"
output: html_notebook
---
  Instalo las librerias y asigno la ruta en github donde esta la base a estudiar

```{r message=FALSE, warning=FALSE}
#  busco librerias a usar y asigno la ruta en github 
rm(list = ls())
 
library(readr)
library(papeR)
library(dplyr)
library(ggplot2)
library(ggpubr)
library(plotly)

Ruta <- "https://raw.githubusercontent.com/EmilianoLS/tp_machine_learning/master/train.csv"


```

Cargo los datos

```{r}
data <- read_csv(url(Ruta))
```

# Analisis preeliminar

```{r}
head(data)                # Veo como se estructuran los datos
```

```{r}
dim(data)                           # Estructura del DataFrame
```

El dataframe contiene 33008 registros y 312 variables. No hay mucha descripci칩n sobre el contenido de cada una, con excepci칩n de *age*,*nac*,*ID* y algunas otras m치s que contienen informaci칩n del saldo.

```{r}
ncol(select_if(data, is.numeric))   # Cantidad de columnas numericas
```

No existen variables del tipo categoricas.

Resumen de las variables predictivas

```{r warning=FALSE}
mins <- as.data.frame(sapply(data, min))
maxs <- as.data.frame(sapply(data, max))

mins$variable <- row.names(mins)
maxs$variable <- row.names(maxs)

rownames(mins) <- NULL
rownames(maxs) <- NULL

names(mins)[1] <- 'minimos'
names(maxs)[1] <- 'maximos'

#plot1 <- ggplot(mins,aes(y = minimos, x = row.names(mins))) + geom_point() + labs(xlab = 'Variables')
#plot2 <- ggplot(maxs,aes(y = maximos, x = row.names(mins))) + geom_point() + labs(xlab = 'Variables')
#ggarrange(plot1, plot2,
#          labels = c("Minimos de todas las variables", "Maximos de todas las variables"),
#          ncol = 2, nrow = 1)
#maxs <- as.data.frame(sapply(data, max))
```

```{r}

# Grafico de minimos

fig1 <- plot_ly(mins, x = ~variable, y = ~minimos, type = 'scatter', mode = 'markers')
#fig1 <- fig1 %>% add_lines(name = ~"Minimos")
#fig1 <- fig1 %>% layout(title = 'Minimos en todas las variables')

# Grafico de maximos

fig2 <- plot_ly(maxs, x = ~variable, y = ~maximos, type = 'scatter', mode = 'markers')
#fig2 <- fig2 %>% add_lines(name = ~"Maximos")
#fig2 <- fig2 %>% layout(title = 'Maximos en todas las variables')
fig <- subplot(fig1, fig2, nrows = 1) 
fig <- fig %>% layout(title = "Metricas", )
fig
```

```{r}
fig <- plot_ly(type = 'box')
fig <- fig %>% add_boxplot(y = mins$minimos, name = 'Minimos', boxpoints = 'suspectedoutliers',marker = list(color = 'rgb(8,81,156)',
                            outliercolor = 'rgba(219, 64, 82, 0.6)',
                            line = list(outliercolor = 'rgba(219, 64, 82, 1.0)',
                                        outlierwidth = 4)))
fig

```

